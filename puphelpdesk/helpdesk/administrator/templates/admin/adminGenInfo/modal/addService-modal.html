{% load static%}

<div class="modal fade" id="AddServiceModal" tabindex="-1" data-backdrop="static" data-keyboard="false" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title mt-0" id="exampleModalScrollableTitle">Add Services</h5>
            </div>

            <div class="modal-body">
                <form id="addService" class="needs-validation" novalidate>
                    
                    
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-3 px-md-3 px-0 col-md-4 card-wrapper">
                                <div class="card mt-4">
                                    <input type="file" accept="image/*" class="image-upload" id="image" style="display: none;">
                                    <label for="image">
                                        <img src="{% static 'assets/images/upload.png' %}" class="img-fluid" alt="portfolio-img" id="image-display">
                                    </label>
                                    <div class="card-body text-center">
                                        <h6 class="card-title" contenteditable="true" id="title">Service Name</h6>
                                        <p class="card-text text-secondary" contenteditable="true" id="description">Service Description</p>
                                        <button class="btn btn-primary add-button" id="add-button">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
            
            </form>
        </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>






<script>
    document.addEventListener('DOMContentLoaded', function () {
        const cardContainer = document.getElementById('card-container');
        const imageUpload = document.querySelector('.image-upload');
        const imageDisplay = document.getElementById('image-display');
        const title = document.getElementById('title');
        const description = document.getElementById('description');
        const addButton = document.getElementById('add-button');
    
        // Edit
        function handleEditButtonClick(card) {
            console.log("Edit button clicked for this card:", card);
            
        }
    
        // delete
        function handleDeleteButtonClick(card) {
           
            console.log("Delete button clicked for this card:", card);
            cardContainer.removeChild(card); // delete card
        }
    
        addButton.addEventListener('click', function () {
            //add ng card
            const newCard = document.createElement('div');
            newCard.classList.add('col-lg-3', 'px-md-3', 'px-0', 'col-md-4', 'card-wrapper');
            newCard.innerHTML = `
                <div class="card mt-4">
                    <img src="${imageDisplay.src}" contenteditable="true" class="img-fluid" alt="portfolio-img">
                    <div class="card-body text-center">
                        <h6 class="card-title" contenteditable="true">${title.textContent}</h6>
                        <p class="card-text text-secondary" contenteditable="true">${description.textContent}</p>
                        <button class="btn btn-primary editBtn">Edit</button>
                        <button class="btn btn-danger deleteBtn">Delete</button>
                    </div>
                </div>
            `;
    
           
            cardContainer.appendChild(newCard);
    
           
            imageDisplay.src = "{% static 'assets/images/upload.png' %}";
            title.textContent = "Product Name";
            description.textContent = "Product Description";
    
            
            const editButton = newCard.querySelector('.editBtn');
            const deleteButton = newCard.querySelector('.deleteBtn');
    
            editButton.addEventListener('click', function () {
                handleEditButtonClick(newCard);
            });
    
            deleteButton.addEventListener('click', function () {
                handleDeleteButtonClick(newCard);
            });
        });

        
    //photo upload button
        imageUpload.addEventListener('change', function () {
            if (imageUpload.files && imageUpload.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    imageDisplay.src = e.target.result;
                };
                reader.readAsDataURL(imageUpload.files[0]);
            }
        });
    });
</script>